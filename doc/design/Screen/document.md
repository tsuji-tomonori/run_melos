# 画面設計書

## 1. トップ画面 (Home)

### レイアウト
- ヘッダー: タイトル "3つまでしか記憶が残らない走れメロス"
- メインコンテンツ:
  - ゲームの説明文
  - "ゲームを開始" ボタン
- フッター: なし

### 機能
- "ゲームを開始" ボタンをクリックすると、ゲーム画面に遷移
- ボタンクリック時にローディングスピナーを表示
- 初期化APIを呼び出し、初期ストーリーと記憶を取得

### デザイン
- 背景: 薄い色調
- タイトル: 大きめのフォント、強調表示
- 説明文: 読みやすいフォントサイズと行間
- ボタン: 目立つ色、ホバー時に色が変化

### コンポーネント
- `Home`: メインコンポーネント
- `LoadingSpinner`: ローディング表示用

### 完了時の挙動
- 初期化API呼び出し成功後、`Game`コンポーネントにリダイレクト
- 初期ストーリーと記憶をルーターのステートとして渡す

## 2. ゲーム画面 (Game)

### レイアウト
- ヘッダー: なし
- メインコンテンツ:
  - 物語表示エリア
  - ページネーションボタン ("戻る" と "次へ")
  - 記憶選択エリア (物語表示完了後に表示)
  - "決定" ボタン (記憶選択後に表示)
- フッター: "Homeへ戻る" ボタン (物語終了時のみ表示)

### 機能
- 物語をタイプライター風に表示
- ページネーションで物語を進行
- 記憶を3つまで選択可能
- 選択した記憶を確定して次の物語を生成
- ローディング中はスピナーを表示
- 物語終了時に "Homeへ戻る" ボタンを表示

### デザイン
- 背景: 落ち着いた色調
- 物語表示エリア: スクロール可能、適切な余白
- 記憶選択ボタン: 選択状態が視覚的に分かるデザイン
- "決定" ボタン: 目立つ色、選択可能時のみ有効化

### コンポーネント
- `Game`: メインコンポーネント
- `StoryDisplay`: 物語表示用
- `MemoryButton`: 記憶選択ボタン
- `LoadingSpinner`: ローディング表示用
- `HomeButton`: ホームに戻るボタン

### 完了時の挙動
- 物語が終了した場合、"Homeへ戻る" ボタンを表示
- 物語が続く場合、記憶選択後に物語生成APIを呼び出し

### ロジック
- 物語表示完了後に記憶選択を有効化
- 3つの記憶が選択されるまで "決定" ボタンを無効化
- 物語生成API呼び出し後、新しい物語と記憶を表示

## 共通要素

### レスポンシブデザイン
- モバイル、タブレット、デスクトップに対応したレイアウト
- メディアクエリを使用して画面サイズに応じてスタイルを調整

### アクセシビリティ
- 適切なコントラスト比
- スクリーンリーダー対応
- キーボードナビゲーション対応

### エラー処理
- API通信エラー時のエラーメッセージ表示
- ユーザーフレンドリーなエラーメッセージ
- エラー発生時にホーム画面に戻るオプションを提供

### アニメーション
- スムーズな画面遷移 (React Transitionを使用)
- ボタンクリック時の視覚的フィードバック

### フォント
- 読みやすさを重視した書体選択 (例: Noto Sans JP)
- 適切なフォントサイズとウェイト

### カラースキーム
- アプリ全体で統一されたカラーパレット
- テーマに合った雰囲気を演出する色使い

## ルーター設定

```jsx
<Router>
  <Routes>
    <Route path="/" element={<Home />} />
    <Route path="/game/:chatId" element={<Game />} />
  </Routes>
</Router>
```

### 画面遷移
1. ホーム画面 (`/`)
   - ゲーム開始時に `/game/:chatId` にリダイレクト
2. ゲーム画面 (`/game/:chatId`)
   - `chatId` をURLパラメータとして使用
   - 初期ストーリーと記憶をルーターのステートとして受け取る
   - 物語終了時にホーム画面 (`/`) に戻る

### コンポーネント分割の基準
- 再利用性: 複数の場所で使用される要素は独立したコンポーネントに
- 責務: 単一の責任を持つように分割
- 複雑さ: 過度に複雑な場合は小さなコンポーネントに分割

### 状態管理
- React Hooksを使用 (`useState`, `useEffect`)
- コンポーネント間の状態共有が必要な場合は、親コンポーネントで状態を管理し、propsで渡す